# 线程



线程和程序其他部分**并行地调用函数（或其他可调用的对象类型）**，所有线程均在**一个进程中运行**。线程经常用于**非阻塞的输出调用和GUI中长时间运行的任务**。线程还可作为表达成独立运行任务的算法的模型。

线程拥有多个优点：

- 性能改善
- 简单易用
- 共享全局内存
- 可移植性

线程也有三点缺陷：

- 线程运行程序里的函数
- 线程同步化和队列
- 全局解释器锁（*DIL*）



## `_thread`模块

### 基本用法

示例：thread_1.py

```python
#!/usr/bin/env python
"派生出子线程，直到输入“q”"


import _thread


def child(tid_int):
	"子线程"
	print('Hello from child!', tid_int)


def parent():
	"父线程"
	tid_int = 0
	while True:
		_thread.start_new_thread(child, (tid_int,))
		if input() == 'q':
			break
		tid_int += 1


if __name__ == '__main__':
	parent()
```

输出：thread_1.py

```out
Hello from child! 0

Hello from child! 1

Hello from child! 2
q
```

- 关于线程的代码只有两行：载入`_thread`模块和创建线程的调用。
- `_thread.start_new_thread`函数用于开始一个新线程。它接受一个函数对象（或其他可调用对象）和一个参数元组。它本身返回一个没有用的值，它派生出来的线程在运行的函数返回后安静地退出。此外，如果线程中的函数抛出未获捕捉的异常，则将打印出堆栈跟踪记录并退出线程，但**程序的其他部分仍将运行**。